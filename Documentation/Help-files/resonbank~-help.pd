#N canvas 549 70 565 718 10;
#X obj 3 370 cnv 3 550 3 empty empty inlets 8 12 0 13 #dcdcdc #000000 0;
#X obj 3 556 cnv 3 550 3 empty empty outlets 8 12 0 13 #dcdcdc #000000 0;
#X obj 103 565 cnv 17 3 17 empty empty 0 5 9 0 16 #dcdcdc #9c9c9c 0;
#X obj 2 3 cnv 15 301 42 empty empty resonbank~ 20 20 2 37 #e0e0e0 #000000 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 302 42 1;
#X restore 2 3 graph;
#X obj 23 40 cnv 4 4 4 empty empty Bank\ of\ resonators 0 28 2 18 #e0e0e0 #000000 0;
#X obj 215 305 else/out~;
#X text 156 409 decay <list>;
#X text 168 424 amp <list>;
#X text 162 438 ramp <list>;
#X text 240 438 - list of ramp time for all filters in the bank;
#X text 49 250 see also:;
#X obj 5 688 cnv 15 552 21 empty empty empty 20 12 0 14 #e0e0e0 #202020 0;
#X obj 5 591 cnv 3 550 3 empty empty flags 8 12 0 13 #dcdcdc #000000 0;
#X text 144 453 rampall float>;
#X text 239 453 - sets ramp time for all filters in the bank;
#X obj 103 377 cnv 17 3 125 empty empty 0 5 9 0 16 #dcdcdc #9c9c9c 0;
#X text 102 613 -decay <list>: sets list of decay time for the resonators, f 69;
#X text 114 627 -amp <list>: sets list of amplitudes for the resonators, f 67;
#X text 108 641 -ramp <list>: sets list of ramp time for the resonators, f 68;
#X text 84 655 -rampall <float>: sets a ramp time for all resonators, f 72;
#X text 240 424 - list of amplitudes for the filters;
#X text 240 409 - list of decay times for the filters;
#N canvas 818 93 422 353 multichannel 0;
#X obj 69 263 else/out~;
#X obj 69 222 else/xselect.mc~ 200 1;
#X floatatom 94 190 4 0 0 0 - - - 0;
#X msg 132 64 mc \$1;
#X obj 132 36 tgl 18 0 empty empty empty 0 -8 0 10 #dfdfdf #000000 #000000 0 1;
#X obj 69 50 sig~ 300;
#X text 205 142 The "-mc" flag or message sets to multichannel output \, where each resonator in the bank is in a different channel., f 30;
#X obj 196 65 else/dust~ 25;
#X obj 69 96 else/resonbank~ -mc -partial 1 3.3 6.7 8.1 -decay 900 800 700 900 -amp 0.9 0.3 0.2 0.2, f 43;
#X obj 94 167 + 1;
#X obj 94 142 hradio 16 1 0 4 empty empty empty 0 -8 0 10 #dfdfdf #000000 #000000 0;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 8 0;
#X connect 4 0 3 0;
#X connect 5 0 8 0;
#X connect 7 0 8 1;
#X connect 8 0 1 0;
#X connect 9 0 2 0;
#X connect 10 0 9 0;
#X restore 446 315 pd multichannel;
#X text 162 669 -mc: sets to multichannel output, f 59;
#X text 174 468 mc float>;
#X text 239 468 - non zero sets to multichannel output;
#X obj 48 312 else/oscbank~;
#X text 156 378 float/signal;
#X text 160 565 signal(s);
#X obj 48 270 else/resonator~;
#X obj 48 291 else/resonbank2~;
#X text 144 393 partial <list>;
#X text 241 378 - frequency multiplier (or 'fundamental');
#X text 240 393 - list of partials for the filters' frequencies;
#X obj 103 533 cnv 17 3 17 empty empty 2 5 9 0 16 #dcdcdc #9c9c9c 0;
#X obj 103 509 cnv 17 3 17 empty empty 1 5 9 0 16 #dcdcdc #9c9c9c 0;
#X text 156 536 float/signal;
#X text 240 536 - time multiplier;
#X text 192 510 signal;
#X text 240 510 - excitation signal;
#X text 227 565 - the resonator bank output signal(s);
#X text 90 598 -partial <list>: sets list of partials for the resonators's frequencies, f 71;
#N canvas 825 256 437 504 example 0;
#X obj 86 398 else/out~;
#X obj 129 145 keyboard 13 50 2 3 0 0 empty empty;
#X obj 129 237 stripnote, f 15;
#X obj 86 304 mtof;
#X obj 216 284 / 127;
#X obj 180 311 *~;
#X obj 138 275 else/white~ -clip, f 11;
#X obj 216 306 else/decay~ 100;
#X obj 86 343 else/resonbank~ -partial 1 2 2.803 3.871 -decay 1000 205 1000 196 -amp 1 0.044 0.891 0.0891, f 32;
#X obj 329 304 /~ 50;
#X text 22 46 Here we have an input from [keyboard]. We use the partial as a ratio list and the leftmost input as the fundamental frequency. The velocy controls a decay envelope \, but besides the amplitude \, we use the velocity to control how much it resonates with the decay multiplier \, so not only you have a louder sound when the velocity is high \, but you also make the sound sustain for longer., f 65;
#X listbox 129 205 20 0 0 0 - - - 0;
#X connect 1 0 11 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 2 1 9 0;
#X connect 3 0 8 0;
#X connect 4 0 7 0;
#X connect 5 0 8 1;
#X connect 6 0 5 0;
#X connect 7 0 5 1;
#X connect 8 0 0 0;
#X connect 9 0 8 2;
#X connect 11 0 2 0;
#X restore 476 292 pd example;
#X obj 309 219 else/imp~ 1;
#X floatatom 404 221 4 0 0 0 - - - 0;
#X msg 374 186 0.5;
#X msg 404 186 1;
#X msg 434 187 2;
#X obj 215 251 else/resonbank~ -partial 1 2.1 2.9 4.1 -decay 1000 750 1000 500 -amp 1 0.4 0.9 0.3, f 32;
#X text 442 217 decay multiplier, f 10;
#X obj 48 333 else/pluck~;
#X obj 305 4 cnv 15 250 40 empty empty empty 12 13 0 18 #7c7c7c #e0e4dc 0;
#X obj 344 11 cnv 10 10 10 empty empty ELSE 0 15 2 30 #7c7c7c #e0e4dc 0;
#X obj 457 11 cnv 10 10 10 empty empty EL 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 477 11 cnv 10 10 10 empty empty Locus 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 514 11 cnv 10 10 10 empty empty Solus' 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 463 26 cnv 10 10 10 empty empty ELSE 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 501 26 cnv 10 10 10 empty empty library 0 6 2 13 #7c7c7c #e0e4dc 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 252 42 1 0 0;
#X restore 304 3 graph;
#X text 36 88 [resonbank~] is a bank of resonators made of [resonator~] objects. The design and structure here is different than [resonator~] in order to make it better suited for sound synthesis. It has a list of partials for each resonator and a frequency multiplier in the left inlet \, kinda like [oscbank~]. The mid inlet the trigger (or excitation) signal (kinda like [pluck~]) and the rightmost inlet is a time multiplier for the decay times. The number of filters is set via the parameter list size (such as the partial list). There's also support for multichannel output., f 81;
#X text 37 186 There are two ways to deal with the frequency multiplier \, the main one is to make it the fundamental as in here:, f 45;
#N canvas 868 230 452 503 +details 0;
#X obj 89 188 loadbang;
#X floatatom 130 318 5 0 0 0 - - - 0;
#X msg 130 339 rampall \$1;
#X obj 89 429 else/out~ 5;
#X text 271 394 <- ramp time.;
#X obj 174 367 else/dust~ 2;
#X text 170 175 click on the messages below to alter between parameters., f 28;
#X msg 89 211 partial 100 250 300 370 420 510 590 650 \, decay 2000 900 1500 900 2000 800 1500 900 \, amp 0.9 1 0.9 1 0.8 0.9 0.7 1, f 42;
#X msg 113 266 partial 140 290 310 330 490 580 690 750 \, decay 1000 800 2500 700 500 1200 1700 900 \, amp 1 1 1 1 0.9 0.8 0.9 1, f 42;
#X obj 89 393 else/resonbank~ -rampall 2000;
#X text 169 317 <- change ramp time;
#X text 60 17 Another way to deal with the partial list is to make it a frequency list in hertz and then treat the left input as a ratio multiplier. By default \, this multiplier is '1' \, by the way. The decay time multiplier \, by default \, is also 1 and can be used in the same both ways (so the decay list can be either a ratio list or a list of dureations)., f 57;
#X text 60 103 The lists can be updated via the leftmost inlet and there is a ramp time in ms to transition between the changes of partial \, decay and amplitude lists. By default \, this ramp is set to 10 ms., f 57;
#X connect 0 0 7 0;
#X connect 1 0 2 0;
#X connect 2 0 9 0;
#X connect 5 0 9 1;
#X connect 7 0 9 0;
#X connect 8 0 9 0;
#X connect 9 0 3 0;
#X restore 470 268 pd +details;
#X obj 215 220 sig~ 150;
#X text 120 483 <lop> \, <bp> \, <hip>;
#X text 241 483 - change between the modes (default 'bp');
#N canvas 818 93 425 393 modes 0;
#X obj 91 296 else/out~;
#X obj 185 210 else/imp~ 1;
#X floatatom 280 212 4 0 0 0 - - - 0;
#X msg 250 177 0.5;
#X msg 280 177 1;
#X msg 310 178 2;
#X obj 91 242 else/resonbank~ -partial 1 2.1 2.9 4.1 -decay 1000 750 1000 500 -amp 1 0.4 0.9 0.3, f 32;
#X text 318 208 decay multiplier, f 10;
#X msg 173 112 lop;
#X msg 180 137 hip;
#X msg 188 160 bp;
#X obj 91 121 sig~ 150;
#X text 59 21 I was unsure if I included the different modes of resonance that you can get in [resonator~]. But since this is a simple abstraction based on it \, why the hell not? This is more of a curiosity \, I think \, than a great and needed feasture \, but hey \, you can experiment with this., f 49;
#X connect 1 0 6 1;
#X connect 2 0 6 2;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 2 0;
#X connect 6 0 0 0;
#X connect 8 0 6 0;
#X connect 9 0 6 0;
#X connect 10 0 6 0;
#X connect 11 0 6 0;
#X restore 488 337 pd modes;
#X connect 44 0 49 1;
#X connect 45 0 49 2;
#X connect 46 0 45 0;
#X connect 47 0 45 0;
#X connect 48 0 45 0;
#X connect 49 0 6 0;
#X connect 63 0 49 0;
